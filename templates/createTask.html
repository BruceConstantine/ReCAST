{% extends 'base.html' %}
{% block title %}
    {{ block.super }} Create Task
{% endblock title %}


{% block pageHeader  %}
    <h1>Initial and Scenario Configuration</h1>
{% endblock pageHeader  %}

<script type="application/javascript" src="/static/js/createTask.js"></script>

{% block pageContent %}
    <div class="wrapper">

    <form action="/upload/" method="post" enctype="multipart/form-data">{% csrf_token %}
        <img id="img_excel" src="/static/img/execl_format.jpg" />
        <span class="input_input_note">Uploaded Excel File Format</span>
        <p id="p_upload_prompt" class="input_input_note"></p>
        <div class="input_input">
            Upload Excel File:
                <button class="input_input_right" type="submit">Upload</button>
                <button class="input_input_right" type="button">
                    <label for='input_excel' class='input_input_right'>Browser from PC</label>
                    <input id='input_excel'  style="display:none" type="file" name="excel_in"/>
                </button>
             <br/>
            <span class="input_input_note">* Note: the uploaded excel file content structure should follow by the above picture</span>
        </div>
    </form>
    <br/>
    <form action="/config/" method="post" enctype="multipart/form-data">{% csrf_token %}
         <div class="input_input">
            Task name:
                <input class="input_input_right" type="text" name="taskName" />
             <br/>
            <span class="input_input_note"> Optional item. Give a name for distinguishing different ReCAST task</span>
         </div>
         <br/>
         <div class="input_input">
            Task description:
             <textarea class="input_input_right" placeholder="e.g. you can input product ID (SP/MA)" name="taskDescription"></textarea> </h3>
             <br/>
             <span class="input_input_note"> Optional item. Give a name for distinguishing different ReCAST task </span>
         </div>
         <br/>
         <div class="input_input">
             Choose Time Horizon:
                 <div class="input_input_right">
                     CW
                     <input type="text" name="CW_start" />
                     - CW &nbsp;
                     <input type="text" name="CW_end" />
                 </div>
             <br/>
        </div>
        <br/>
        <div class="input_input">
             Weight the scenarios
            <div style="text-align: right">
                <table class="input_table_right" border="1">
                  <thead>
                    <tr>
                      <th>Scenario No.</th>
                      <th>Customer Weight</th>
                      <th>Stock Weight</th>
                      <th>&nbsp;</th> <!-- minus symbol -->
                    </tr>
                  </thead>
                  <tbody id="tb_snr">
                    <tr>
                      <td>Scenario&nbsp; <span class="span_snr_no">1.</span> </td>
                      <td><input type="text" name="CW_input"/></td>
                      <td><input type="text" name="SW_input"/></td>
                        <td><span class="minus">-</span></td>
                    </tr>
                  </tbody>
                  <tfoot>
                    <tr>
                        <td><span class="add">+</span></td>
                    </tr>
                  </tfoot>
                </table>
                <br/>
                <span class="input_input_note">* Note: value range in [0,1]</span>
                <script type="application/javascript" >
                    var add = document.getElementsByClassName("add")[0] // Only one add class element
                    //Initalize minus onlick event
                    var minusList = document.getElementsByClassName("minus")
                    //for(var each_span_ele in minusList) {
                    //    each_span_ele.onclick=function (ev) {
//
                    //    }
                   // })
                    //TODO: bind event to minus

                    var snr_no = 1;
                    add.onclick = function (ev) {
                        var tb_snr = document.getElementById("tb_snr");
                        tb_snr.innerHTML = tb_snr.innerHTML
                            + '<tr><td>Scenario&nbsp; <span class="span_snr_no">'+ ++snr_no +'</span>.</td> \
                                <td><input type="text" name="CW_input"/></td>\
                                <td><input type="text" name="SW_input"/></td>\
                                <td><span class="minus">-</span></td></tr>'
                    }
                </script>
            </div>
            <br/>
    </div>

{% endblock pageContent %}

{# part 4.list of button options #}
{% block btnBar %}
        <button type="button"><a href="/index/">Quit</a></button>
        <button type="submit"> Next </button>
    </form>
    </div>
{% endblock btnBar %}